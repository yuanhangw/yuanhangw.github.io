<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Retrieve data from FRED database</title>
    <meta name="description" content="keep it simple :: finish it off :: iterate
">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="http://yuanhangw.github.com/html/FREDData.html">
</head>


  
  <body>

    <header class="site-header">

  <div class="wrapper">
  


    
    <a class="site-title" href="/"> 
    <img class ="logo" src="/Mobius.jpg" alt="" height="50" width="50">nion</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
      
      <!--
      <div class="trigger">
        
          
          <a class="page-link" href="/html/CombinedFactors.html">Toolbox - 1</a>
          
        
          
          <a class="page-link" href="/html/ExpectedMaximumDrawDown.html">Drawdown</a>
          
        
          
          <a class="page-link" href="/html/FREDData.html">Retrieve data from FRED database</a>
          
        
          
          <a class="page-link" href="/html/MultipleFactors.html">Multiple Factors - Load Data</a>
          
        
          
          <a class="page-link" href="/html/MultipleFactors_1.html">Multiple Factors - HML updated with Risk adjustment</a>
          
        
          
          <a class="page-link" href="/html/MultipleFactors_2.html">Multiple Factors - SML adjust for risk</a>
          
        
          
          <a class="page-link" href="/html/MultipleFactors_3.html">Multiple Factors - BAB watch out for correlation</a>
          
        
          
          <a class="page-link" href="/html/MultipleFactors_4.html">Multiple Factors - QUAL - Quality is underated</a>
          
        
          
          <a class="page-link" href="/html/MultipleFactors_5.html">Multiple Factors - Revisit MOM</a>
          
        
          
          <a class="page-link" href="/html/MultipleFactors_6.html">Multiple Factors - Sanity Check</a>
          
        
          
          <a class="page-link" href="/html/MultipleFactors_7.html">Multiple Factors - All in one</a>
          
        
          
          <a class="page-link" href="/html/MultipleFactors_8.html">Multiple Factors - Bigger All in one</a>
          
        
          
          <a class="page-link" href="/html/SimpleMomentumFactor.html">Introducing Mother of all Factors - MOM</a>
          
        
          
          <a class="page-link" href="/html/SimpleMomentumFactor_1.html">MOM factor walkforward</a>
          
        
          
          <a class="page-link" href="/html/SimpleMomentumFactor_2.html">MOM too good to be true?</a>
          
        
          
          <a class="page-link" href="/html/SimpleMomentumFactor_3.html">MOM 2->N</a>
          
        
          
          <a class="page-link" href="/html/SimpleMomentumFactor_4.html">MOM short Cap weighted index?</a>
          
        
          
          <a class="page-link" href="/html/SimpleMomentumFactor_5.html">MOM walkforward with N securities</a>
          
        
          
          <a class="page-link" href="/html/SimpleMomentumFactor_6.html">MOM sector neutral</a>
          
        
          
          <a class="page-link" href="/html/SimpleMomentumFactor_7.html">MOM alternative MOM</a>
          
        
          
          <a class="page-link" href="/html/SimpleMomentumFactor_8.html">MOM the bigger the better?</a>
          
        
          
          <a class="page-link" href="/html/WhatInMyDataSet.html">What's in my dataset</a>
          
        
          
          <a class="page-link" href="/html/WhatInMyEquityList.html">Equity List and Field List</a>
          
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="/post.html">Post</a>
          
        
      </div>
      -->
      <div class="trigger">
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="/post.html">Post</a>
          
        
      </div>
      
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Retrieve data from FRED database</h1>
  </header>

  <article class="post-content">
    <!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Data from FRED (St Louis Federal Reserve Data Base)</title><meta name="generator" content="MATLAB 8.4"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2016-01-19"><meta name="DC.source" content="FREDData.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Data from FRED (St Louis Federal Reserve Data Base)</h1><!--introduction--><p>We will retrieve data from FRED and present it nicely.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Retrieve data from FRED</a></li><li><a href="#5">Plot the data properly</a></li><li><a href="#11">Log scale v.s. Normal scale</a></li></ul></div><h2>Retrieve data from FRED<a name="1"></a></h2><p>First, let's establish the connection. Note that you should use 'https://' instead of 'http://', FRED no longer accept unsecured connections.</p><pre class="codeinput">    c = fred(<span class="string">'https://research.stlouisfed.org/fred2/'</span>) ;
</pre><p>We try to retrieve CPATAX: corporate profit before tax. Alternatively we can retrieve U.S. GDP data by replacing CPATAX with GDP</p><pre class="codeinput">    data = fetch(c, <span class="string">'CPATAX'</span>);
    <span class="comment">% alternatively data = fetch(c, 'GDP');</span>
</pre><p>Now let's display the time series properly, the data struct contains 11 field. the main data series content is in 'Data'. We want to display the time series in semilog scales. let's take a look at the data content first:</p><pre class="codeinput">    disp(data);
</pre><pre class="codeoutput">                 Title: ' Corporate Profits After Tax with Inventory Valua...'
              SeriesID: ' CPATAX'
                Source: ' US. Bureau of Economic Analysis'
               Release: ' Gross Domestic Product'
    SeasonalAdjustment: ' Seasonally Adjusted Annual Rate'
             Frequency: ' Quarterly'
                 Units: ' Billions of Dollars'
             DateRange: ' 1947-01-01 to 2015-07-01'
           LastUpdated: ' 2015-12-22 7:51 AM CST'
                 Notes: ' BEA Account Code: A551RC1  A Guide to the Nation...'
                  Data: [275x2 double]

</pre><p>Now Let's get the date &amp; data out of STRUCT Data:</p><pre class="codeinput">    content = data.Data;
    dt = content(:,1);
    dd = content(:,2);
</pre><h2>Plot the data properly<a name="5"></a></h2><p>Plot the semilogy plot</p><pre class="codeinput">    fredplot = semilogy(dt, dd);
</pre><img vspace="5" hspace="5" src="FREDData_01.png" alt=""> <p>Let's set the numerical mark straight</p><pre class="codeinput">    set(gca,<span class="string">'YTick'</span>,[10 50 100 500 1000 5000],<span class="keyword">...</span>
      <span class="string">'YTickLabel'</span>,{<span class="string">'10'</span>,<span class="string">'50'</span>, <span class="string">'100'</span>,<span class="string">'500'</span>, <span class="string">'1,000'</span>,<span class="string">'5,000'</span>});
    datetick(<span class="string">'x'</span>,<span class="string">'yyyy'</span>);

    xlim <span class="string">auto</span>;
    <span class="comment">%for finer control, do something like this:</span>
    <span class="comment">%ylim([5 3000]);</span>
</pre><img vspace="5" hspace="5" src="FREDData_02.png" alt=""> <p>Let's add title &amp; labels, by pulling from the STRUCT fields</p><pre class="codeinput">    title(data.Title(1:40), <span class="string">'FontSize'</span>, 10);
    ylabel(data.Units, <span class="string">'FontSize'</span>, 10);
    xlabel(<span class="string">'Year'</span>, <span class="string">'FontSize'</span>, 10);
</pre><img vspace="5" hspace="5" src="FREDData_03.png" alt=""> <p>Let's set fontsize of Xtick Ytick label to 10.</p><pre class="codeinput">    xlhand = get(gca,<span class="string">'XTickLabel'</span>);
    ylhand = get(gca,<span class="string">'YTickLabel'</span>);

    set(gca,<span class="string">'XTickLabel'</span>,xlhand,<span class="string">'fontsize'</span>,8)
    set(gca,<span class="string">'YTickLabel'</span>,ylhand,<span class="string">'fontsize'</span>,8)
</pre><img vspace="5" hspace="5" src="FREDData_04.png" alt=""> <p>Let's set the linewidth to 1.5, and make the line half transparent</p><pre class="codeinput">    set(fredplot,<span class="string">'linewidth'</span>,1.5);
    fredplot.Color(4) = 0.5;  <span class="comment">% 50% transparent</span>
</pre><img vspace="5" hspace="5" src="FREDData_05.png" alt=""> <p>Voila! In the long run, it has been a pretty straight line : ).</p><h2>Log scale v.s. Normal scale<a name="11"></a></h2><p>In normal scale, this time series looks much more volatile.</p><pre class="codeinput">    fredplotnormal = plot(dt, dd);
    datetick(<span class="string">'x'</span>,<span class="string">'yyyy'</span>);


    title(data.Title(1:40), <span class="string">'FontSize'</span>, 10);
    ylabel(data.Units, <span class="string">'FontSize'</span>, 10);
    xlabel(<span class="string">'Year'</span>, <span class="string">'FontSize'</span>, 10);

    xlhand = get(gca,<span class="string">'XTickLabel'</span>);
    ylhand = get(gca,<span class="string">'YTickLabel'</span>);

    set(gca,<span class="string">'XTickLabel'</span>,xlhand,<span class="string">'fontsize'</span>,8)
    set(gca,<span class="string">'YTickLabel'</span>,ylhand,<span class="string">'fontsize'</span>,8)

    set(fredplotnormal,<span class="string">'linewidth'</span>,1.5);
    fredplotnormal.Color(4) = 0.5;
</pre><img vspace="5" hspace="5" src="FREDData_06.png" alt=""> <p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2014b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Data from FRED (St Louis Federal Reserve Data Base)
% We will retrieve data from FRED and present it nicely. 

%% Retrieve data from FRED
% First, let's establish the connection. Note that you should use
% 'https://' instead of 'http://', FRED no longer accept unsecured connections. 

  
    c = fred('https://research.stlouisfed.org/fred2/') ; 
  
  
%%
% We try to retrieve CPATAX: corporate profit before tax.
% Alternatively we can retrieve U.S. GDP data by replacing CPATAX with GDP

    data = fetch(c, 'CPATAX'); 
    % alternatively data = fetch(c, 'GDP'); 

%%
% Now let's display the time series properly, the data struct
% contains 11 field. the main data series content is in 'Data'. We want to
% display the time series in semilog scales. 
% let's take a look at the data content first:

    disp(data);
    
%%
% Now Let's get the date & data out of STRUCT Data:


    content = data.Data;
    dt = content(:,1);
    dd = content(:,2);

%% Plot the data properly   
% Plot the semilogy plot

    fredplot = semilogy(dt, dd); 
    
%%    
% Let's set the numerical mark straight

    set(gca,'YTick',[10 50 100 500 1000 5000],...
      'YTickLabel',{'10','50', '100','500', '1,000','5,000'});
    datetick('x','yyyy');
    
    xlim auto;
    %for finer control, do something like this:
    %ylim([5 3000]);
%%
% Let's add title & labels, by pulling from the STRUCT fields  

    title(data.Title(1:40), 'FontSize', 10);
    ylabel(data.Units, 'FontSize', 10);
    xlabel('Year', 'FontSize', 10);

%%
% Let's set fontsize of Xtick Ytick label to 10. 

    xlhand = get(gca,'XTickLabel');
    ylhand = get(gca,'YTickLabel');

    set(gca,'XTickLabel',xlhand,'fontsize',8)
    set(gca,'YTickLabel',ylhand,'fontsize',8)
%%  
% Let's set the linewidth to 1.5, and make the line half transparent

    set(fredplot,'linewidth',1.5);
    fredplot.Color(4) = 0.5;  % 50% transparent


%% 
% Voila! 
% In the long run, it has been a pretty straight line : ). 

%% Log scale v.s. Normal scale
% In normal scale, this time series looks much more volatile. 

    fredplotnormal = plot(dt, dd); 
    datetick('x','yyyy');


    title(data.Title(1:40), 'FontSize', 10);
    ylabel(data.Units, 'FontSize', 10);
    xlabel('Year', 'FontSize', 10);

    xlhand = get(gca,'XTickLabel');
    ylhand = get(gca,'YTickLabel');

    set(gca,'XTickLabel',xlhand,'fontsize',8)
    set(gca,'YTickLabel',ylhand,'fontsize',8)

    set(fredplotnormal,'linewidth',1.5);
    fredplotnormal.Color(4) = 0.5; 
    
    

##### SOURCE END #####
--></body></html>
  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">nion</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>nion</li>
          <li><a href="mailto:iam@here.now">iam@here.now</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/yuanhangw">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">yuanhangw</span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/large">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>

              <span class="username">large</span>
            </a>
          </li>
          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">keep it simple :: finish it off :: iterate
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
